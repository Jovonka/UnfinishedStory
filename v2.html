<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Jesus Heals the Blind Man</title>
<style>
html, body {
  margin: 0;
  padding: 0;
  height: 100%;
  overflow: hidden;
  background: black;
}

/* Fullscreen responsive video */
video {
  position: fixed;
  top: 50%;
  left: 50%;
  width: 100%;
  height: 100%;
  object-fit: cover;
  transform: translate(-50%, -50%);
  z-index: 0;
}

/* Black overlay for fade-out at the end */
#black-overlay {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: black;
  opacity: 0;
  pointer-events: none;
  transition: opacity 1.5s ease;
  z-index: 2;
}
</style>
</head>
<body>

<video id="sceneVideo" controls playsinline>
  <source src="v2.mp4" type="video/mp4">
  Your browser does not support the video tag.
</video>

<div id="black-overlay"></div>

<script>
const video = document.getElementById("sceneVideo");
const overlay = document.getElementById("black-overlay");
let started = false;

// Play from start only on first click
video.addEventListener("click", async () => {
  if (!started) {
    video.currentTime = 0; // start at beginning only once
    started = true;
  }
  try {
    await video.play();
  } catch (err) {
    console.warn("Playback interrupted:", err);
  }
});

// Allow pause/resume naturally — no reset
video.addEventListener("pause", () => {
  // Nothing special — just pauses at current time
});

// Fade out audio + screen near the end
video.addEventListener("timeupdate", () => {
  if (video.duration - video.currentTime <= 2 && !video.dataset.fadingOut) {
    video.dataset.fadingOut = "true";

    // Fade out audio
    const fadeAudio = setInterval(() => {
      if (video.volume > 0.05) {
        video.volume -= 0.05;
      } else {
        video.volume = 0;
        clearInterval(fadeAudio);
      }
    }, 100);

    // Fade screen to black
    overlay.style.opacity = "1";
  }
});

// Redirect when video ends
video.addEventListener("ended", () => {
  window.location.href = "page3.html";
});
</script>

</body>
</html>
